<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta http-equiv="X-UA-Compatible" content="ie=edge"/><title>FCC: Javascript Calculator</title><style type="text/css">@import "https://fonts.googleapis.com/css?family=Share+Tech+Mono";
@font-face {
  font-family: "Digital";
  src: url("//db.onlinewebfonts.com/t/8e22783d707ad140bffe18b2a3812529.eot");
  src: url("//db.onlinewebfonts.com/t/8e22783d707ad140bffe18b2a3812529.eot?#iefix") format("embedded-opentype"), url("//db.onlinewebfonts.com/t/8e22783d707ad140bffe18b2a3812529.woff2") format("woff2"), url("//db.onlinewebfonts.com/t/8e22783d707ad140bffe18b2a3812529.woff") format("woff"), url("//db.onlinewebfonts.com/t/8e22783d707ad140bffe18b2a3812529.ttf") format("truetype"), url("//db.onlinewebfonts.com/t/8e22783d707ad140bffe18b2a3812529.svg#Digital-7") format("svg"); }

#app {
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center; }

body {
  background: #c2c2d6;
  -webkit-touch-callout: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  user-select: none;
  cursor: default; }

.calculator {
  border: 2px solid #47476b;
  padding: 5px;
  background: black;
  width: 320px;
  position: relative; }

.formulaScreen {
  min-height: 20px;
  font-family: digital;
  font-size: 20px;
  color: orange;
  text-align: right;
  vertical-align: text-top;
  line-height: 20px;
  overflow-wrap: break-word;
  word-wrap: break-word; }

.outputScreen {
  font-size: 29px;
  font-family: digital;
  color: white;
  text-align: right;
  line-height: 35px; }

button {
  position: relative;
  height: 65px;
  width: 80px;
  color: white;
  outline: 1px solid black;
  border: none;
  background: #4d4d4d;
  font-family: Share Tech Mono, monospace;
  font-size: 20px;
  cursor: default; }
  button:hover {
    color: black;
    outline: 0.05em solid grey;
    z-index: 3; }

.jumbo {
  width: 160px; }

.author {
  text-align: center;
  font-family: Share Tech Mono, sans;
  margin-top: 15px; }
  .author a {
    text-decoration: none;
    color: #00264d;
    line-height: 26px; }
</style></head><body><div id="app"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.3.1/react.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/15.3.1/react-dom.min.js"></script>
<script>"use strict";

function _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

function _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }

function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }

function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }

function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return self; }

/* global React, ReactDOM */

/* eslint-disable react/prop-types, react/no-multi-comp,
 no-eval, no-nested-ternary */
// eslint-disable-next-line no-unused-vars
var projectName = 'javascript-calculator'; // To see a more advanced version of this app with features such as toggle sign
// and Clear Entry buttons, see this pen
// https://codepen.io/no_stack_dub_sack/full/jrxpKP/
// coded by @no-stack-dub-sack (github) / @no_stack_sub_sack (codepen)
// VARS:

var isOperator = /[x/+‑]/,
    endsWithOperator = /[x+‑/]$/,
    clearStyle = {
  background: '#ac3939'
},
    operatorStyle = {
  background: '#666666'
},
    equalsStyle = {
  background: '#004466',
  position: 'absolute',
  height: 130,
  bottom: 5
}; // COMPONENTS:

var Calculator =
/*#__PURE__*/
function (_React$Component) {
  _inherits(Calculator, _React$Component);

  function Calculator(props) {
    var _this;

    _classCallCheck(this, Calculator);

    _this = _possibleConstructorReturn(this, _getPrototypeOf(Calculator).call(this, props));
    _this.state = {
      currentVal: '0',
      prevVal: '0',
      formula: '',
      currentSign: 'pos',
      lastClicked: ''
    };
    _this.maxDigitWarning = _this.maxDigitWarning.bind(_assertThisInitialized(_assertThisInitialized(_this)));
    _this.handleOperators = _this.handleOperators.bind(_assertThisInitialized(_assertThisInitialized(_this)));
    _this.handleEvaluate = _this.handleEvaluate.bind(_assertThisInitialized(_assertThisInitialized(_this)));
    _this.initialize = _this.initialize.bind(_assertThisInitialized(_assertThisInitialized(_this)));
    _this.handleDecimal = _this.handleDecimal.bind(_assertThisInitialized(_assertThisInitialized(_this)));
    _this.handleNumbers = _this.handleNumbers.bind(_assertThisInitialized(_assertThisInitialized(_this)));
    return _this;
  }

  _createClass(Calculator, [{
    key: "maxDigitWarning",
    value: function maxDigitWarning() {
      var _this2 = this;

      this.setState({
        currentVal: 'Digit Limit Met',
        prevVal: this.state.currentVal
      });
      setTimeout(function () {
        return _this2.setState({
          currentVal: _this2.state.prevVal
        });
      }, 1000);
    }
  }, {
    key: "handleEvaluate",
    value: function handleEvaluate() {
      if (!this.state.currentVal.includes('Limit')) {
        var expression = this.state.formula;

        if (endsWithOperator.test(expression)) {
          expression = expression.slice(0, -1);
        }

        expression = expression.replace(/x/g, '*').replace(/‑/g, '-');
        var answer = Math.round(1000000000000 * eval(expression)) / 1000000000000;
        this.setState({
          currentVal: answer.toString(),
          formula: expression.replace(/\*/g, '⋅').replace(/-/g, '‑') + '=' + answer,
          prevVal: answer,
          evaluated: true
        });
      }
    }
  }, {
    key: "handleOperators",
    value: function handleOperators(e) {
      if (!this.state.currentVal.includes('Limit')) {
        this.setState({
          currentVal: e.target.value,
          evaluated: false
        });

        if (this.state.formula.includes('=')) {
          this.setState({
            formula: this.state.prevVal + e.target.value
          });
        } else {
          this.setState({
            // comment 2
            prevVal: !isOperator.test(this.state.currentVal) ? this.state.formula : this.state.prevVal,
            formula: !isOperator.test(this.state.currentVal) ? this.state.formula += e.target.value : this.state.prevVal += e.target.value
          });
        }
      }
    }
  }, {
    key: "handleNumbers",
    value: function handleNumbers(e) {
      if (!this.state.currentVal.includes('Limit')) {
        this.setState({
          evaluated: false
        });

        if (this.state.currentVal.length > 21) {
          this.maxDigitWarning();
        } else if (this.state.evaluated === true) {
          this.setState({
            currentVal: e.target.value,
            formula: e.target.value !== '0' ? e.target.value : ''
          });
        } else {
          this.setState({
            currentVal: this.state.currentVal === '0' || isOperator.test(this.state.currentVal) ? e.target.value : this.state.currentVal + e.target.value,
            formula: this.state.currentVal === '0' && e.target.value === '0' ? this.state.formula : /([^.0-9]0)$/.test(this.state.formula) ? this.state.formula.slice(0, -1) + e.target.value : this.state.formula + e.target.value
          });
        }
      }
    }
  }, {
    key: "handleDecimal",
    value: function handleDecimal() {
      if (this.state.evaluated === true) {
        this.setState({
          currentVal: '0.',
          formula: '0.',
          evaluated: false
        });
      } else if (!this.state.currentVal.includes('.') && !this.state.currentVal.includes('Limit')) {
        this.setState({
          evaluated: false
        });

        if (this.state.currentVal.length > 21) {
          this.maxDigitWarning();
        } else if (endsWithOperator.test(this.state.formula) || this.state.currentVal === '0' && this.state.formula === '') {
          this.setState({
            currentVal: '0.',
            formula: this.state.formula + '0.'
          });
        } else {
          this.setState({
            currentVal: this.state.formula.match(/(-?\d+\.?\d*)$/)[0] + '.',
            formula: this.state.formula + '.'
          });
        }
      }
    }
  }, {
    key: "initialize",
    value: function initialize() {
      this.setState({
        currentVal: '0',
        prevVal: '0',
        formula: '',
        currentSign: 'pos',
        lastClicked: ''
      });
    }
  }, {
    key: "render",
    value: function render() {
      return React.createElement("div", null, React.createElement("div", {
        className: "calculator"
      }, React.createElement(Formula, {
        formula: this.state.formula.replace(/x/g, '⋅')
      }), React.createElement(Output, {
        currentValue: this.state.currentVal
      }), React.createElement(Buttons, {
        decimal: this.handleDecimal,
        evaluate: this.handleEvaluate,
        initialize: this.initialize,
        numbers: this.handleNumbers,
        operators: this.handleOperators
      })), React.createElement("div", {
        className: "author"
      }, ' ', "Designed and Coded By ", React.createElement("br", null), React.createElement("a", {
        href: "https://goo.gl/6NNLMG",
        target: "_blank"
      }, "Peter Weinberg")));
    }
  }]);

  return Calculator;
}(React.Component);

var Buttons =
/*#__PURE__*/
function (_React$Component2) {
  _inherits(Buttons, _React$Component2);

  function Buttons() {
    _classCallCheck(this, Buttons);

    return _possibleConstructorReturn(this, _getPrototypeOf(Buttons).apply(this, arguments));
  }

  _createClass(Buttons, [{
    key: "render",
    value: function render() {
      return React.createElement("div", null, React.createElement("button", {
        className: "jumbo",
        id: "clear",
        onClick: this.props.initialize,
        style: clearStyle,
        value: "AC"
      }, "AC"), React.createElement("button", {
        id: "divide",
        onClick: this.props.operators,
        style: operatorStyle,
        value: "/"
      }, "/"), React.createElement("button", {
        id: "multiply",
        onClick: this.props.operators,
        style: operatorStyle,
        value: "x"
      }, "x"), React.createElement("button", {
        id: "seven",
        onClick: this.props.numbers,
        value: "7"
      }, "7"), React.createElement("button", {
        id: "eight",
        onClick: this.props.numbers,
        value: "8"
      }, "8"), React.createElement("button", {
        id: "nine",
        onClick: this.props.numbers,
        value: "9"
      }, "9"), React.createElement("button", {
        id: "subtract",
        onClick: this.props.operators,
        style: operatorStyle,
        value: "\u2011"
      }, "-"), React.createElement("button", {
        id: "four",
        onClick: this.props.numbers,
        value: "4"
      }, "4"), React.createElement("button", {
        id: "five",
        onClick: this.props.numbers,
        value: "5"
      }, "5"), React.createElement("button", {
        id: "six",
        onClick: this.props.numbers,
        value: "6"
      }, "6"), React.createElement("button", {
        id: "add",
        onClick: this.props.operators,
        style: operatorStyle,
        value: "+"
      }, "+"), React.createElement("button", {
        id: "one",
        onClick: this.props.numbers,
        value: "1"
      }, "1"), React.createElement("button", {
        id: "two",
        onClick: this.props.numbers,
        value: "2"
      }, "2"), React.createElement("button", {
        id: "three",
        onClick: this.props.numbers,
        value: "3"
      }, "3"), React.createElement("button", {
        className: "jumbo",
        id: "zero",
        onClick: this.props.numbers,
        value: "0"
      }, "0"), React.createElement("button", {
        id: "decimal",
        onClick: this.props.decimal,
        value: "."
      }, "."), React.createElement("button", {
        id: "equals",
        onClick: this.props.evaluate,
        style: equalsStyle,
        value: "="
      }, "="));
    }
  }]);

  return Buttons;
}(React.Component);

var Output =
/*#__PURE__*/
function (_React$Component3) {
  _inherits(Output, _React$Component3);

  function Output() {
    _classCallCheck(this, Output);

    return _possibleConstructorReturn(this, _getPrototypeOf(Output).apply(this, arguments));
  }

  _createClass(Output, [{
    key: "render",
    value: function render() {
      return React.createElement("div", {
        className: "outputScreen",
        id: "display"
      }, this.props.currentValue);
    }
  }]);

  return Output;
}(React.Component);

var Formula =
/*#__PURE__*/
function (_React$Component4) {
  _inherits(Formula, _React$Component4);

  function Formula() {
    _classCallCheck(this, Formula);

    return _possibleConstructorReturn(this, _getPrototypeOf(Formula).apply(this, arguments));
  }

  _createClass(Formula, [{
    key: "render",
    value: function render() {
      return React.createElement("div", {
        className: "formulaScreen"
      }, this.props.formula);
    }
  }]);

  return Formula;
}(React.Component);

ReactDOM.render(React.createElement(Calculator, null), document.getElementById('app'));</script><script src="https://cdn.freecodecamp.org/testable-projects-fcc/v1/bundle.js"></script></body></html>